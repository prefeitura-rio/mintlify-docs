---
title: Instala√ß√£o do DBT e depend√™ncias
description: Guia passo a passo para configurar o ambiente com DBT, Python e GitHub.
---

Este guia explica como instalar o DBT (Data Build Tool), al√©m de configurar o ambiente com Python e GitHub.

## ‚úÖ Pr√©-requisitos

- Acesso ao terminal (Linux, macOS ou Windows)
- Permiss√µes de administrador

---

## 1. Instalar o Python

<Note>
  O Python √© uma linguagem de programa√ß√£o muito utilizada em projetos de ci√™ncia
  de dados, automa√ß√£o e engenharia de dados. O DBT (Data Build Tool) √©
  distribu√≠do como um pacote Python, ou seja, usamos o Python como base para
  instalar, configurar e executar o DBT no nosso ambiente.
</Note>

Recomendamos instalar a √∫ltima vers√£o do Python via [pyenv](https://github.com/pyenv/pyenv) no Linux/macOS ou diretamente do site oficial no Windows.

<Warning> O DBT requer Python 3.9 ou superior. </Warning>

### macOS / Linux (com pyenv)

```bash
# Instalar pyenv (requer curl e git)
curl https://pyenv.run | bash

# Adicionar ao shell (bash/zsh)
echo 'export PYENV_ROOT="$HOME/.pyenv"' >> ~/.bashrc
echo 'export PATH="$PYENV_ROOT/bin:$PATH"' >> ~/.bashrc
echo 'eval "$(pyenv init --path)"' >> ~/.bashrc
source ~/.bashrc

# Instalar e usar uma vers√£o do Python
pyenv install 3.12
pyenv global 3.12
```

### Windows

Baixe o instalador oficial em: [https://www.python.org/downloads/windows/](https://www.python.org/downloads/windows/)

Durante a instala√ß√£o:

- Marque a op√ß√£o "Add python.exe to PATH"
- Clique em Customize installation e ative a op√ß√£o "Install pip"
- Finalize a instala√ß√£o e reinicie o terminal

Verifique:

```bash
python --version
pip --version
```

## 2. Instalar o Visual Studio Code

<Note>
  O [Visual Studio Code (VS Code)](https://code.visualstudio.com/) √© um editor
  de c√≥digo leve e poderoso, muito utilizado em projetos com Python, DBT e Git.
</Note>

Embora n√£o seja obrigat√≥rio, recomendamos o uso do VS Code porque ele facilita:

- A navega√ß√£o e edi√ß√£o dos arquivos .sql e .yml usados no DBT
- O controle de vers√£o com Git atrav√©s de uma interface gr√°fica simples
- A visualiza√ß√£o de erros, highlights de sintaxe e integra√ß√£o com o terminal

### Instala√ß√£o

Baixe e instale o VS Code no site oficial:  
üëâ [https://code.visualstudio.com/](https://code.visualstudio.com/)

### Extens√µes recomendadas

Ap√≥s instalar o VS Code, voc√™ pode adicionar algumas extens√µes √∫teis:

- Python (Microsoft) ‚Äî para suporte ao ambiente virtual e sintaxe Python
- SQL (ou SQLTools) ‚Äî para melhor experi√™ncia com arquivos .sql
- DBT Power User ‚Äî extens√£o dedicada ao desenvolvimento com DBT

Essas ferramentas deixar√£o seu ambiente de trabalho mais produtivo e organizado.

## 3. Instalar o Git

<Note>
  O Git √© um sistema de controle de vers√£o distribu√≠do. Ele √© essencial para
  trabalharmos de forma colaborativa, mantendo o hist√≥rico de altera√ß√µes e
  facilitando o versionamento dos nossos arquivos.
</Note>

No nosso projeto, usaremos o Git para subir os modelos constru√≠dos com o DBT para o nosso reposit√≥rio principal, que centraliza todos os modelos do nosso datalake. Isso garante rastreabilidade, colabora√ß√£o e integra√ß√£o com os pipelines de dados.

### macOS (via Homebrew)

```bash
brew install git
```

### Linux (via apt)

```bash
sudo apt update
sudo apt install git
```

### Windows

Baixe o instalador em: [https://git-scm.com/download/win](https://git-scm.com/download/win)

Durante a instala√ß√£o:

- Mantenha as op√ß√µes padr√£o
- Marque o Visual Studio Code como editor padr√£o
- Ao final, reinicie o terminal

Verifique:

```bash
git --version
```

## 4. Criar e ativar um ambiente virtual Python

<Note>
  Ambientes virtuais Python s√£o usados para isolar as depend√™ncias de um
  projeto. Isso significa que os pacotes que instalamos para o DBT n√£o v√£o
  interferir em outros projetos nem conflitar com pacotes instalados globalmente
  no seu sistema.
</Note>

Vamos criar um ambiente virtual chamado dbt-env, que usaremos exclusivamente para este projeto.

### Linux/macOS

Criar o ambiente:
```bash
python -m venv dbt-env
```

Ativar o ambiente:

<Warning>
  Sempre que voc√™ for trabalhar com DBT, lembre-se de ativar o ambiente
  virtual com o comando abaixo.
</Warning>

```bash
source dbt-env/bin/activate
```

### Windows

Criar o ambiente:
```cmd
python -m venv dbt-env
```

Ativar o ambiente:

<Warning>
  Sempre que voc√™ for trabalhar com DBT, lembre-se de ativar o ambiente
  virtual com o comando abaixo.
</Warning>

```cmd
dbt-env\Scripts\activate
```

Desativar o ambiente (qualquer sistema):
```bash
deactivate
```

## 5. Instala√ß√£o do DBT

<Note>
  O DBT (Data Build Tool) √© uma ferramenta que permite transformar dados
  dentro do seu data warehouse usando apenas SQL e alguns comandos em linha de
  comando.
</Note>

Para funcionar com diferentes tecnologias de Data Warehouse (como BigQuery, Snowflake, Postgres, Redshift, etc), o DBT utiliza adaptadores. Adaptadores s√£o pacotes que permitem que o DBT se conecte e interaja com cada tipo espec√≠fico de banco de dados.

No nosso caso, usaremos apenas o BigQuery, pois √© onde nosso data lake est√° hospedado.

Vamos instalar ent√£o o DBT com o adaptador do BigQuery:

```bash
python -m pip install dbt-core dbt-bigquery
```

Verifique a instala√ß√£o:

```bash
dbt --version
```

Sa√≠da esperada (exemplo):

```bash
Core:
  - installed: 1.9.3
  - latest:    1.9.4

Plugins:
  - bigquery: 1.9.1
```

## 6. Configurando vari√°veis de ambiente e credenciais

<Note>
  Para conectar o DBT ao BigQuery, precisamos configurar credenciais de autentica√ß√£o
  atrav√©s de uma service account. Al√©m disso, algumas vari√°veis de ambiente podem
  ser configuradas para personalizar o comportamento do DBT.
</Note>

### 6.1 Solicitar Service Account

Antes de prosseguir, voc√™ precisa solicitar uma service account para o time respons√°vel da Iplanrio. Esta service account deve ter as permiss√µes necess√°rias para:

- Ler dados das tabelas do BigQuery
- Criar e modificar tabelas no projeto do BigQuery
- Executar jobs de processamento

### 6.2 Criar pasta de credenciais

Crie uma pasta chamada `credentials` **fora do seu projeto** para armazenar as credenciais de forma segura:

```bash
# Linux/macOS
mkdir ~/credentials

# Windows
mkdir C:\Users\%USERNAME%\credentials
```

<Warning>
  Nunca inclua a pasta credentials no controle de vers√£o (Git).
</Warning>

### 6.3 Adicionar arquivo da Service Account

1. Baixe o arquivo JSON da service account fornecida pelo time da Iplanrio
2. Mova o arquivo para a pasta `credentials` criada anteriormente
3. Renomeie o arquivo para algo descritivo, por exemplo: `iplanrio-dbt-service-account.json`

### 6.4 Criar arquivo profiles.yml

Crie um arquivo chamado `profiles.yml` na pasta `credentials` com a seguinte estrutura:

```yaml
iplan:
  target: dev
  outputs:
    dev:
      type: bigquery
      method: service-account
      project: rj-iplanrio-dev
      schema: dbt_models
      location: US
      keyfile: /caminho/completo/para/credentials/iplanrio-dbt-service-account.json
      threads: 8
    
    prod:
      type: bigquery
      method: service-account
      project: rj-iplanrio
      schema: dbt_models
      location: US
      keyfile: /caminho/completo/para/credentials/iplanrio-dbt-service-account.json
      threads: 8
```

<Note>
  Substitua os valores pelos dados reais do seu projeto:
  - `rj-iplanrio-dev` e `rj-iplanrio`: IDs dos projetos no Google Cloud
  - `dbt_models`: schema padr√£o para os modelos do DBT
  - `keyfile`: caminho completo para o arquivo JSON da service account
</Note>

### 6.5 Configurar vari√°veis de ambiente

Configure a vari√°vel `DBT_PROFILES_DIR` para apontar para a pasta onde est√° o `profiles.yml`:

#### Linux/macOS

Adicione ao final do arquivo `~/.bashrc`, `~/.zshrc` ou outro arquivo de configura√ß√£o do seu shell:

```bash
export DBT_PROFILES_DIR=~/credentials
```

Depois execute:

```bash
source ~/.bashrc  # ou ~/.zshrc, dependendo do seu shell
```

#### Windows

No Windows, configure a vari√°vel de ambiente:

```cmd
setx DBT_PROFILES_DIR C:\Users\%USERNAME%\credentials
```

Ou atrav√©s da interface gr√°fica:

1. Abra o menu Iniciar e busque por "Vari√°veis de ambiente"
2. Clique em "Editar vari√°veis de ambiente do sistema"
3. Na se√ß√£o "Vari√°veis de usu√°rio", clique em "Novo" e adicione:
   - Nome da vari√°vel: `DBT_PROFILES_DIR`
   - Valor da vari√°vel: `C:\Users\%USERNAME%\credentials`

<Warning>
  Sempre que voc√™ for trabalhar com DBT, verifique se as vari√°veis de ambiente est√£o corretamente definidas, especialmente <code>DBT_PROFILES_DIR</code>.
</Warning>

## 7. Configurar o GitHub (opcional, mas recomendado)

1. Crie uma conta em [github.com](https://github.com/)
2. Configure o Git localmente:

```bash
git config --global user.name "Seu Nome"
git config --global user.email "seu@email.com"
```

---

## üéâ Pronto!

Agora seu ambiente est√° preparado para iniciar projetos com o DBT.

